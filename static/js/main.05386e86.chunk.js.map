{"version":3,"sources":["constants.js","tools.js","component/Square.js","component/Board.js","component/Info.js","component/Game.js","index.js"],"names":["NUMBERCLASS","KEYCODE","randomTile","board","arr","i","length","push","r","Math","floor","random","n","toLeft","changeFlag","j","k","SIZE","Square","value","classNumber","className","Board","boardData","Array","fill","map","ele","idx","Info","handleStart","onClick","Game","useState","setBoardData","handleKeyboard","e","keyCode","preventDefault","tmp","change","init","toRight","toUp","toDown","useEffect","document","addEventListener","removeEventListener","tmp_board","href","target","rel","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.05386e86.chunk.js","sourcesContent":["export const NUMBERCLASS={\r\n    0:\"\",\r\n    2:\"c2\",\r\n    4:\"c4\",\r\n    8:\"c8\",\r\n    16:\"c16\",\r\n    32:\"c32\",\r\n    64:\"c64\",\r\n    128:\"c128\",\r\n    256:\"c256\",\r\n    512:\"c512\",\r\n    1024:\"c1024\",\r\n    2048:\"c2048\"\r\n}\r\n\r\nexport const KEYCODE={\r\n    37:\"LEFT\",\r\n    38:\"UP\",\r\n    39:\"RIGHT\",\r\n    40:\"DOWN\"\r\n}\r\n\r\nexport const SIZE=4;","import { SIZE } from \"./constants\";\r\n\r\nexport function idx2Loc(idx){\r\n    let col=idx % SIZE;\r\n    let row=Math.floor(idx/SIZE);\r\n    return [row,col]\r\n}\r\n\r\nexport function randomTile(board){\r\n    let arr=[];\r\n    for(let i=0;i<board.length;i++){\r\n        if(board[i]===0) arr.push(i);\r\n    }\r\n    let r=Math.floor(Math.random()*arr.length);\r\n    let n=Math.floor(Math.random()*2)===1?4:2;\r\n    board[arr[r]]=n;\r\n}\r\n\r\nexport function toLeft(board){\r\n    let changeFlag=false;\r\n    for(let i=0;i<SIZE;i++){ //按行处理\r\n        //全部往左排\r\n        for(let j=0;j<SIZE;j++){\r\n            if(board[i*SIZE+j]===0){\r\n                for(let k=j+1;k<SIZE;k++){\r\n                    if(board[i*SIZE+k]!==0){\r\n                        [board[i*SIZE+j],board[i*SIZE+k]]=[board[i*SIZE+k],board[i*SIZE+j]];\r\n                        changeFlag=true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //合并\r\n        let k=1;\r\n        while(k<SIZE&&board[i*SIZE+k]!==0){\r\n            if(board[i*SIZE+k]===board[i*SIZE+k-1]){\r\n                board[i*SIZE+k-1]=2*board[i*SIZE+k-1];\r\n                board[i*SIZE+k]=k===SIZE-1?0:board[i*SIZE+k+1];\r\n                changeFlag=true;\r\n            }\r\n            k++;\r\n        }\r\n\r\n    }\r\n    return changeFlag;\r\n}\r\n\r\nexport function toRight(board){\r\n    let init=[...board];\r\n    for(let i=0;i<SIZE;i++){\r\n        for(let j=0;j<Math.floor(SIZE/2);j++){\r\n            [init[SIZE*i+j],init[SIZE*i+SIZE-j-1]]=[init[SIZE*i+SIZE-j-1],init[SIZE*i+j]]\r\n        }\r\n    }\r\n    let changeFlag=toLeft(init);\r\n    for(let i=0;i<SIZE;i++){\r\n        for(let j=0;j<SIZE;j++){\r\n            board[SIZE*i+j]=init[SIZE*i+SIZE-j-1];\r\n        }\r\n    }\r\n    return changeFlag;\r\n}\r\n\r\nexport function toUp(board){\r\n    let init=[];\r\n    for(let i=0;i<SIZE;i++){\r\n        for(let j=0;j<SIZE;j++){\r\n            init[SIZE*i+j]=board[SIZE*j+SIZE-i-1];\r\n        }\r\n    }\r\n\r\n    let changeFlag=toLeft(init);\r\n    for(let i=0;i<SIZE;i++){\r\n        for(let j=0;j<SIZE;j++){\r\n            board[SIZE*i+j]=init[SIZE*(SIZE-j-1)+i];\r\n        }\r\n    }\r\n    return changeFlag;\r\n}\r\n\r\nexport function toDown(board){\r\n    let init=[];\r\n    for(let i=0;i<SIZE;i++){\r\n        for(let j=0;j<SIZE;j++){\r\n            init[SIZE*i+j]=board[SIZE*(SIZE-j-1)+i];\r\n        }\r\n    }\r\n\r\n    let changeFlag=toLeft(init);\r\n    for(let i=0;i<SIZE;i++){\r\n        for(let j=0;j<SIZE;j++){\r\n            board[SIZE*i+j]=init[SIZE*j+SIZE-i-1];\r\n        }\r\n    }\r\n    return changeFlag;\r\n}\r\n","import { NUMBERCLASS } from \"../constants\";\r\n\r\nfunction Square({value}){\r\n    const classNumber=NUMBERCLASS[value];\r\n    return (\r\n        <div className={`square ${classNumber}`}>{value!==0?value:\"\"}</div>\r\n    )\r\n}\r\n\r\nexport default Square;","import Square from \"./Square\";\r\n\r\nfunction Board({boardData}){\r\n    \r\n    return (\r\n        <div className=\"board\">\r\n            {Array(16).fill(null).map((ele,idx)=>(\r\n                <Square value={boardData[idx]} key={idx} />\r\n            ))}    \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Board;","function Info({handleStart}){\r\n    return (\r\n        <div className=\"info\">\r\n            <div className=\"score\"><span>💣</span>000</div>\r\n            <div className=\"status\"><button onClick={handleStart}>😄</button></div>\r\n            <div className=\"time\"><span>🕙</span>000</div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default Info;","import { useEffect, useState } from \"react\";\r\nimport { KEYCODE } from \"../constants\";\r\nimport { randomTile, toDown, toLeft, toRight, toUp } from \"../tools\";\r\nimport Board from \"./Board\";\r\nimport Info from \"./Info\";\r\nfunction Game(){\r\n    const [boardData,setBoardData]=useState(new Array(16).fill(0));\r\n\r\n    const reducer=(state,action)=>{\r\n        switch(action.type){\r\n\r\n        }\r\n    }\r\n\r\n    const handleStart=()=>{\r\n        let tmp_board=new Array(16).fill(0);\r\n        randomTile(tmp_board);\r\n        setBoardData(tmp_board)\r\n    }\r\n\r\n    const handleKeyboard=(e)=>{\r\n        if(KEYCODE[e.keyCode]){\r\n            e.preventDefault();\r\n            let tmp=[...boardData],change=false;\r\n            switch(KEYCODE[e.keyCode]){\r\n                case \"LEFT\": change=toLeft(tmp);break;\r\n                case \"RIGHT\": change=toRight(tmp);break;\r\n                case \"UP\": change=toUp(tmp);break;\r\n                case \"DOWN\": change=toDown(tmp);break;\r\n                default:break;\r\n            }\r\n\r\n           if(change) randomTile(tmp);\r\n           setBoardData(tmp);\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        document.addEventListener(\"keyup\",handleKeyboard);\r\n\r\n        return ()=>{\r\n            document.removeEventListener(\"keyup\",handleKeyboard);\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div className=\"box\">\r\n            <main>\r\n                <h1>2048 Game in React</h1>\r\n                <Info handleStart={handleStart}/>\r\n                <Board boardData={boardData}/>\r\n            </main>\r\n            <div className=\"ref\">\r\n                <p>Source Code Link: <a href=\"https://github.com/kokoyo1997/2048-react\" target=\"_blank\" rel=\"noreferrer\">https://github.com/kokoyo1997/2048-react</a></p>\r\n            </div>\r\n        </div> \r\n    )\r\n}\r\n\r\nexport default Game;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Game from './component/Game';\n\nReactDOM.render(\n    <Game />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}